<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Insert title here</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
	
	<script>
		$(document).ready(function() {
			$("#sel1").on("change", function() {
				var result = $("#sel1 option:selected").val();
				//var datas = {areaName: result};
				
				$.ajax({
					url: "/ajax/ui/selectBox1",
					type: "POST",
					//dataType: "text",
					//data: datas,
					data: {areaName: result},
					success: function(data) {
						$("#sel2").empty();
						$("#sel2").append("<option value=''>선택하세요</option>");
						
						for (var i = 0; i < data.length; i++) {
							$("#sel2").append("<option>" + data[i].areaName + "</option>");
						}
					},
					error: function() {
						alert("통신 중 오류가 발생했습니다.");
					}
				});
			});
			
			
			$("#sel3").on("change", function() {
				var result = $("#sel3 option:selected").val();
				
				$.ajax({
					url: "/ajax/ui/selectBox3",
					type: "POST",
					data: {areaName: result},
					success: function(data) {
						// jquery로 원하는 태그를 선택해서 사용할 경우 리소스를 사용함
						// 매번 동일한 태그를 검색할 경우 리소스의 낭비가 심해짐
						// 동일한 태그를 여러번 검색하여 사용하는 것보다 한번 검색해서 자바스크립트의 변수에 대입 후 변수를 사용하면 리소스를 아낄 수 있음
						var sel4 = $("#sel4");
						// $("#sel4").empty();
						sel4.empty();
						sel4.append("<option value=''>선택하세요</option>");
						
						for (var i = 0; i < data.length; i++) {
							sel4.append("<option>" + data[i] + "</option>");
						}
					},
					error: function() {
						alert("통신 중 오류가 발생했습니다.");
					}
				});
			});
		});
		
		/* 문제 3) 쇼핑몰의 상품 분류를 하듯이 대분류, 중분류, 소분류 형태의 select box를 생성하고, 대분류를 선택하면 중분류의 내용이 출력되고, 중분류의 내용을 선택하면 소분류의 내용이 출력되는 프로그램을 작성하세요
		* 각 분류의 내용은 대분류 3개, 중분류/소분류는 각각 2개로 표시
		*/
	</script>

</head>
<body>
	<header class="container">
		<div class="my-5 p-5">
			<h1>ajax를 사용하여 SelectBox에 내용 추가하기</h1>
		</div>
	</header>
	<main class="container">
		<select class="form-control mb-2" id="sel1" name="sel1">
			<option value="" selected>선택하세요</option>
			<option value="서울">서울</option>
			<option value="대전">대전</option>
			<option value="대구">대구</option>
			<option value="부산">부산</option>
		</select>
		
		<select class="form-control" id="sel2" name="sel2">
			<option value="" selected>선택하세요</option>
		</select>
	</main>
	
	<br>
	<br>
	
	<div class="container">
		<select class="form-control mb-2" id="sel3" name="sel3">
			<option value="" selected>선택하세요</option>
			<option value="서울">서울</option>
			<option value="대전">대전</option>
			<option value="대구">대구</option>
			<option value="부산">부산</option>
		</select>
		
		<select class="form-control" id="sel4" name="sel4">
			<option value="" selected>선택하세요</option>
		</select>
	</div>
</body>
</html>













