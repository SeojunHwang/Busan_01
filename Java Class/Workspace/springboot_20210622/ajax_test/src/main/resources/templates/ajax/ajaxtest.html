<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ajax를 사용한 통신 방식</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
	
	<script>
		$(document).ready(function() {
			$("#btnSubmit").on("click", function() {
				/* id값이 num1인 input 태그의 value 속성값을 javascript변수 num1에 저장 */
				var num1 = $("#num1").val();
				var num2 = $("#num2").val();
				/* javascript의 object 타입의 변수 datas 선언 */
				/* key num1에 js 변수 num1의 값 대입, 키 num2에 js 변수 num2의 값 대입 */
				var datas = {num1 : num1, num2 : num2};
				
				/* jquery를 이용한 ajax 사용 */
				/* jquery의 ajax 옵션 */
				/*
				* url
				 - 기본값 : 현재 페이지
				 - type : String
				 - 서버로 요청할 url 주소
				 
				* type
				 - 기본값 : GET
				 - type : String
				 - get, post 중 전송방식을 선택
				 
				* data
				 - type : PlainObject, String, Array
				 - 서버로 보낼 데이터
				 
				* dataType
				 - type : String
				 - 서버에서 전송하는 데이터를 수신 시 데이터 형식을 지정, 미 지정 시 mime 타입을 참고하여 자동으로 처리, (json, text, xml, script, html)
				 
				* success
				 - type : function(Anything data, String textStatus, jqXHR jqXHR)
				 - 요청 성공 시 실행되는 콜백함수
				 
				* error
				 - type : function(jqXHR jqXHR, String textStatus, String errorThrows)
				 - 요청에 실패 시 호출
				 
				* async
				 - 기본값 : true
				 - type : boolean
				 - 기본적으로 비동기 요청, 동기 요청이 필요 시 false 사용
				 
				* contentType
				 - 기본값 : 'application/x-www-formurlencoded; charset=UTF-8'
				 - type : boolean or String
				 - 헤더의 Content-Type를 설정
				 
				*/
				$.ajax({
					/* ajax통해 접속할 페이지의 주소 */
					url: "/ajax/ajaxTest",
					/* 데이터 전송 방식 선택(post) */
					type: "post",
					/* 실제 서버로 전송할 데이터 지정 */
					data: datas,
					/* ajax 통신이 성공하였을 경우 실행할 코드 */
					/* 매개변수 data는 서버에서 전송한 데이터 */
					success: function(data) {
						alert("통신 성공");
						$("#h1result").text(data.result);
						$("#h2num1").text(data.num1);
						$("#h2num2").text(data.num2);
					},
					/* ajax 통신이 실패하였을 경우 실행할 코드 */
					error: function() {
						alert("통신에 오류가 발생했습니다.");
					}
				});
			});
		});
	</script>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-sm mx-auto">
				<div class="form-group">
					<label for="num1">숫자 1 : </label>
					<input type="text" id="num1" name="num1" class="form-control" placeholder="숫자를 입력하세요">
				</div>
				<div class="form-group">
					<label for="num2">숫자 2 : </label>
					<input type="text" id="num2" name="num2" class="form-control" placeholder="숫자를 입력하세요">
				</div>
				<button type="button" id="btnSubmit">확인</button>
			</div>
		</div>
		<div class="row mt-4">
			<div class="col-sm-6 mx-auto">
				<h1 id="h1result">값없음</h1>
				<h2 id="h2num1">값없음</h2>
				<h2 id="h2num2">값없음</h2>
			</div>
		</div>
	</div>
</body>
</html>












