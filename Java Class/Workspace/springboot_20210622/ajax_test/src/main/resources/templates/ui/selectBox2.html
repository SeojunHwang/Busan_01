<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Insert title here</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
	
	<script>
		$(document).ready(function() {
			$("#sel1").on("change", function() {
				var result = $("#sel1 option:selected").val();
				
				$.ajax({
					url: "/ajax/ui/Categori1",
					type: "POST",
					data: {cate1: result},
					success: function(data) {
						var sel2 = $("#sel2");
						var sel3 = $("#sel3");
						selectBoxClear(sel2);
						selectBoxClear(sel3);
						/* var sel2 = $("#sel2");
						sel2.empty();
						sel2.append("<option value=''>선택하세요</option>"); */
						
						for (var i = 0; i < data.length; i++) {
							sel2.append("<option>" + data[i] + "</option>");
						}
						
						$("#sel3").empty();
					},
					error: function() {
						alert("통신 중 오류가 발생했습니다.");
					}
				});
			});
			
			$("#sel2").on("change", function() {
				var result = $("#sel2 option:selected").val();
				
				$.ajax({
					url: "/ajax/ui/Categori2",
					type: "POST",
					data: {cate2: result},
					success: function(data) {
						var sel3 = $("#sel3");
						selectBoxClear(sel3);
						/* var sel3 = $("#sel3");
						sel3.empty();
						sel3.append("<option value=''>선택하세요</option>"); */
						
						for (var i = 0; i < data.length; i++) {
							sel3.append("<option>" + data[i] + "</option>");
						}
					},
					error: function() {
						alert("통신 중 오류가 발생했습니다.");
					}
				});
			});
			
			function selectBoxClear(tag) {
				tag.empty();
				tag.append("<option value=''>선택하세요</option>");
			}
		});
	</script>
</head>
<body>
	<header class="container">
		<div class="my-5 p-5">
			<h1>문제 3</h1>
		</div>
	</header>
	
	<main class="container">
		<div class="row">
			<div class="col-sm-6 mx-auto">
				<h3>select box에 ajax를 사용하여 내용 자동으로 추가하기</h3>
				<select class="form-control mb-3" id="sel1" name="sel1">
					<option value="" selected>선택하세요</option>
					<option value="패션잡화">패션잡화</option>
					<option value="디지털가전">디지털가전</option>
					<option value="생활건강">생활건강</option>
				</select>
				<select class="form-control mb-3" id="sel2" name="sel2">
					<option value="" selected>선택하세요</option>
				</select>
				<select class="form-control mb-3" id="sel3" name="sel3">
					<option value="" selected>선택하세요</option>
				</select>
			</div>
		</div>
	</main>
</body>
</html>











